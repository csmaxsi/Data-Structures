<?php
class Node 
{
    public int $data;
    public ?Node $nextNode;
    
    public function __construct(int $data)
    {
        $this->data = $data;
        $this->nextNode = null;
    }
    
}

class LinkedList
{
    public ?Node $head;


    public function __construct()
    {
        $this->head =null;
    }
    
    public function insertNodeAtstart(int $data) :void
    {
        $newNode = new Node($data);
        $newNode->nextNode = $this->head;
        $this->head = $newNode ;
        
    }
    
    public function insertNodeAtEnd(int $data) : void
    {   
        $newNode = new Node($data);
        if($this->head ===null)
            {  
                $this->head = $newNode;
            }
        else
            {
                $currentNode = $this->head;
                while ($currentNode->nextNode !== null)
                {
                    $currentNode = $currentNode->nextNode;
                }
                $currentNode->nextNode = $newNode;
             }
    }
    
    public function deleteNode(int $data)
    {   
        //atStart
        $curretNode = $this->head;
        $currentNext = $curretNode->nextNode;
        if($curretNode->data === $data )
        {
            $this->head = $currentNext;
        }
        else
        {
            while($currentNext->data != $data)
            {   
                $curretNode = $curretNode->nextNode;
                $currentNext = $currentNext->nextNode;
            }  
            if($currentNext->nextNode == null)
            {   //atEnd
                $curretNode->nextNode = null;
            }else
            {   //atMiddle
                $curretNode->nextNode = $currentNext->nextNode;
            }
            
        }
        
    }
    public function printList() 
    {
        $currentNode = $this->head;
        while($currentNode !==null )
        {   
            echo $currentNode->data." ";
            $currentNode = $currentNode->nextNode;
        }
        echo "\n";
    }
    
    public function searchNode(int $data)
    {
        $currentNode = $this->head;
        while($currentNode !== null)
        {
            if($currentNode->data === $data)
            {
               echo "Its a match !\n";
               return ;
            }
            $currentNode=$currentNode->nextNode;
        }
            
        echo "It is not a match\n";
    }
}

class LinkLIstCommandList
{
    private LinkedList $linkedList;
    
    public function __construct(LinkedList $linkedList)
    {
        $this->linkedList = $linkedList;
    }
    
    public function showMainMessage(): void
    {
        echo "\n1. Insert a new Node at the end of the list  \n2. Delete a node by its value \n3. Traverse and print all the elements in the list  \n4. Search for a node by its value \n";
    }
    
    public function showMessage(string $message): void
    {
        echo $message;
    }
    
    public function getAnswer(string $question): string
    {
        $a= readline($question); 
        return $a;
    }
    
    public function startFlow()
    {
        $this->showMainMessage();
        $a=$this->getAnswer("");
        
        switch($a)
        {
            case 1:
                $a = (int)$this->getAnswer("enter the value to add: ");
                $this->linkedList->insertNodeAtEnd($a);
                $this->showMessage("Value added to the list \n");
                break;
            case 2:
                $this->linkedList->printList();
                $a = (int)$this->getAnswer("enter the value to Delete : \n");
                $this->linkedList->deleteNode($a);
                $this->showMessage("Value deleted \n");
                $this->showMessage("New List : \n");
                $this->linkedList->printList();
                
                break;
            case 3:
                $this->linkedList->printList();
                break;
            case 4:
                 $a = (int)$this->getAnswer("enter the value to search : \n");
                 $this->linkedList->searchNode($a);
                break;
            
        }       
     $this->startFlow();        
    }

}

$linkedList = new LinkedList();
$LinkLIstCommandList = new LinkLIstCommandList($linkedList);
$LinkLIstCommandList->startFlow();

?>
