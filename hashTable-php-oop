<?php
class HashData
{
    private string $key;
    private string $value;
    
    public function __construct(string $key , string $value)
    {
        $this->key = $key;
        $this->value = $value;
    
    }
}

class HashTable
{
    public array $hashItems;
    private int $size;
    
    public function __construct(int $size =3)
    {
        $this->size = $size;
        $this->hashItems = array_fill(0, $size, []);
    }
    
    private function hashFunction(string $key) : int
    {
        $hash = 0;
        $len = strlen($key);
        for($i = 0; $i < $len ; $i++)
        {
            $hash += ord($key[$i]);
        }
        return $hash % $this->size;
  
    }
    
    public function setItem(string $key,string $value) : void
    {   
        $index = $this->hashFunction($key, $this->hashItems);
        $this->hashItems[$index] = $value; 
    }
    
    public function getItem($key) : string 
    {
        $item = $this->hashFunction($key, $this->hashItems);
        return $this->hashItems[$item];
        
    }
    
    
}

class HashCommandLine
{
    private HashTable $hashTable;
    
    public function __construct(HashTable $hashTable)
    {
        $this->hashTable = $hashTable;
    }
    
    public function showMainMessage()
    {
        echo "\n1.Insert data \n2.Delete data \n3.Find data \n";
    }
    
    public function showMessage(string $message): void
    {
        echo $message;
    }
    
    public function getAnswer(string $message): string
    {
        $ans = readline($message);
        return $ans;
    }
    
    public function startFlow() 
    {
        $this->showMainMessage();
        $a = $this->getAnswer("");
        
        switch($a)
        {
            case 1:
                $key = $this->getAnswer("Enter Key : ");
                $val = $this->getAnswer("Enter Value : ");
                $this->hashTable->setItem($key,$val);
                echo "Data inserted !\n";
                break;
            case 2:
                break;
            case 3:
                $key = $this->getAnswer("Enter Key : ");
                echo $this->hashTable->getItem($key)."\n";
                break;
        }
       $this->startFlow(); 
    }
}

$hTable = new HashTable();
$hCommandLine = new HashCommandLine($hTable);
$hCommandLine->startFlow();
?>
